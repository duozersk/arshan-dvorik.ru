(function($){var SAMO_TOOLTIP_OVER=false;var SAMO_TOOLTIP_ID=0;var SAMO_TOOLTIPS=[];samo.tooltip=function(){var self=this;self.text='';self.element=null;self.timer=null;self.overTimer=null;self.overTimeout=0;self.pos=0;self.timeout=500;self.shown=false;self.id=false;self.setText=function(text){self.text=text;return self;};self.setHideTimeout=function(t){self.timeout=t;return self;};self.setPos=function(pos){self.pos=pos;return self;};self.setElement=function(element,ind){self.element=$(element);if(!self.element.is('.samo_tooltip_applied')){self.element.addClass('samo_tooltip_applied').attr('data-samo-tooltip-id',ind).bind('mouseover mouseout',function(e){if(e.type!='mouseover'){SAMO_TOOLTIP_OVER=false;self.startTimeout();clearTimeout(self.overTimer);}else{self.show();}});}
return self;};self.body=function(){if(self.id){var $ret=$('#SAMO_TOOLTIP_'+self.id);return $ret.size()?$ret:false;}
return false;};self.hide=function(){var $b=self.body();if($b&&!SAMO_TOOLTIP_OVER){$b.stop().fadeOut(100,function(){$b=self.body();if($b){$b.remove();}
self.id=false;self.shown=false;});}
return self;};self.startTimeout=function(timeout){clearTimeout(self.timer);self.timer=setTimeout(self.hide,timeout?timeout:self.timeout);return self;};self.show=function(){if(self.overTimeout>=500){self.element.css('cursor','help');}
self.overTimer=setTimeout(function(){if(self.text){clearTimeout(self.timer);var $b=self.body();if(!$b){samo.hideAllToolTips();self.id=++SAMO_TOOLTIP_ID;var $body=$('<div class="samo_tooltip" id="SAMO_TOOLTIP_'+self.id+'"><div class="samo_tooltip_content"></div><div style="position: relative;" class="samo_tooltip_arrow"><div class="samo_tooltip_arrow1"><div class="samo_tooltip_arrow2"></div></div></div></div>');$('body').append($body);$body.bind('mouseover mouseout',function(e){var over=SAMO_TOOLTIP_OVER=e.type=='mouseover';if(!over){self.startTimeout(10);}else{clearTimeout(self.timer);}});self.shown=false;}
if(!self.shown){$b=self.body();samo.hideAllToolTips(self.id);if(typeof self.text=='string'){$('div.samo_tooltip_content',$b).html(self.text);}else{$('div.samo_tooltip_content',$b).append(self.text);}
var bw=$('body').width();var bh=$('body').height();var st=parseInt(document.body.scrollTop||document.documentElement.scrollTop);var sl=parseInt(document.body.scrollLeft||document.documentElement.scrollLeft);$b.fadeIn();self.shown=true;var sbw=$b.outerWidth();var sbh=$b.outerHeight();var pos=self.element.offset();var x=pos.left;var y=pos.top;var indent=30;var showArrow=true;if(self.pos==0){x+=Math.round(self.element.outerWidth()/2)-Math.round($b.outerWidth()/2);y+=-$b.outerHeight()-indent;}else{showArrow=false;indent=15;x+=self.element.outerWidth()+indent;y+=Math.round(self.element.outerHeight()/2)-Math.round($b.outerHeight()/2);}
if(y<st){y=st;showArrow=false;}else if(y+sbh>bh){y=bh-sbh;showArrow=false;}
if(x<sl){x=sl;showArrow=false;}else if(x+sbw>bw){x=bw-sbw;showArrow=false;}
if(sbw<70){showArrow=false;}
x=Math.round(x);y=Math.round(y);if(showArrow){$('.samo_tooltip_arrow',$b).css('display','visible');}else{$('.samo_tooltip_arrow',$b).css('visibility','hidden');}
$b.css({left:x,top:y,zIndex:2000});}}},self.overTimeout);return self;}};samo.removeOldToolTips=function(){if(SAMO_TOOLTIPS){$.each(SAMO_TOOLTIPS,function(i,e){if(e&&!$('[data-samo-tooltip-id='+i+']').size()){var g=SAMO_TOOLTIPS[i];delete SAMO_TOOLTIPS[i];g=null;}});}};samo.hideAllToolTips=function(id){if(!id){$('.samo_tooltip').remove();}else{$('.samo_tooltip[id!=SAMO_TOOLTIP_'+id+']').remove();}};$.fn.setToolTip=function(html,pos,overTimeout){if(overTimeout===null){overTimeout=0;}
var ind=0;var t=false;if($(this).is('.samo_tooltip_applied')){ind=$(this).attr('data-samo-tooltip-id');if(SAMO_TOOLTIPS[ind]){t=SAMO_TOOLTIPS[ind];}}
if(!t){t=new samo.tooltip();ind=SAMO_TOOLTIPS.length;SAMO_TOOLTIPS[ind]=t;t.setElement($(this),ind);}
t.overTimeout=overTimeout;t.setText(html);t.setPos(pos?pos:0);return t;};$.fn.removeToolTip=function(){var $t=$(this);if($t.is('.samo_tooltip_applied')){$t.removeAttr('data-samo-tooltip-id').removeClass('samo_tooltip_applied').unbind('mouseover').unbind('mousout');samo.removeOldToolTips();}};$(document).ready(function(){$(document).on('click',function(){if(!SAMO_TOOLTIP_OVER){samo.hideAllToolTips();}});});})(samo.jQuery);